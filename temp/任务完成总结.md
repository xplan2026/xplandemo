# X-plan Demo é¡¹ç›®å¼€å‘å®Œæˆæ€»ç»“

**å®Œæˆæ—¶é—´**: 2026-02-08

---

## âœ… æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ (7/7)

### 1. DemoSite ä¾§è¾¹æ é‡æ„ âœ…

**æ–‡ä»¶åˆ›å»º/ä¿®æ”¹**:
- `frontend/DemoSite/index.html` - æ–°çš„ä¾§è¾¹æ å¸ƒå±€
- `frontend/DemoSite/css/sidebar.css` - ä¾§è¾¹æ æ ·å¼
- `frontend/DemoSite/js/sidebar.js` - ä¾§è¾¹æ äº¤äº’é€»è¾‘

**åŠŸèƒ½**:
- å·¦ä¾§è¾¹æ å¯¼èˆª
- ä¸‰ä¸ªé¡µé¢åˆ‡æ¢ï¼ˆæœºå™¨äººæŠ¢è·‘ã€æ™ºèƒ½åˆçº¦é˜²ç›—å¸ã€æ“ä½œæŒ‡å—ï¼‰
- å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯æ”¯æŒ
- é’±åŒ…è¿æ¥çŠ¶æ€æ˜¾ç¤º

---

### 2. Web3 è·¨åŸŸé‰´æƒå®ç° âœ…

**æ–‡ä»¶åˆ›å»º/ä¿®æ”¹**:
- `frontend/official-site/src/components/layouts/Header.tsx` - æ·»åŠ "æ¼”ç¤º/Demo"å¯¼èˆªé¡¹
- `frontend/official-site/src/pages/DemoPage.tsx` - å®ç°è·¨åŸŸé€šä¿¡
- `frontend/official-site/.env.example` - ç¯å¢ƒå˜é‡é…ç½®

**åŠŸèƒ½**:
- å®˜ç½‘è¿æ¥é’±åŒ…åæ‰èƒ½è®¿é—®æ¼”ç¤ºé¡µé¢
- ç‚¹å‡»"è¿›å…¥æ¼”ç¤ºç³»ç»Ÿ"è·³è½¬åˆ° DemoSite
- ä½¿ç”¨ `postMessage` ä¼ é€’é’±åŒ…ä¿¡æ¯
- DemoSite æ¥æ”¶å¹¶ä¿å­˜é’±åŒ…è¿æ¥çŠ¶æ€

---

### 3. Smart æ™ºèƒ½åˆçº¦é˜²ç›—å¸ âœ…

**ç›®å½•ç»“æ„**:
```
Smart/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ AntiTheft.sol      # ä¸»åˆçº¦
â”‚   â””â”€â”€ IERC20.sol         # ERC20 æ¥å£
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ deploy.js          # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ hardhat.config.js       # Hardhat é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ .env.example
â””â”€â”€ .gitignore
```

**åŠŸèƒ½**:
- æƒé™æ§åˆ¶ï¼ˆOwner å’Œ Guardianï¼‰
- ç´§æ€¥æ¨¡å¼ï¼ˆå¯ç”¨åç¦æ­¢æ‰€æœ‰è½¬ç§»ï¼‰
- æ—¶é—´é”ï¼ˆè½¬ç§»å†·å´æœŸï¼‰
- æš‚åœ/æ¢å¤è½¬ç§»
- å†»ç»“è½¬ç§»è®°å½•

---

### 4. GitHub Actions - Worker è‡ªåŠ¨éƒ¨ç½² âœ…

**æ–‡ä»¶**: `.github/workflows/deploy-worker.yml`

**é…ç½®**:
- è§¦å‘æ¡ä»¶ï¼šæ¨é€åˆ° `master` åˆ†æ”¯
- è‡ªåŠ¨éƒ¨ç½² `cloudflare/tactics-1` åˆ° Cloudflare

**éœ€è¦çš„ GitHub Secrets**:
- `CLOUDFLARE_API_TOKEN`
- `CLOUDFLARE_ACCOUNT_ID`

---

### 5. Ubuntu æœåŠ¡å™¨ Nginx é…ç½® âœ…

**æ–‡ä»¶**:
- `server-configs/xplan-demo.conf` - Nginx é…ç½®
- `server-configs/deploy-frontend.sh` - éƒ¨ç½²è„šæœ¬
- `server-configs/setup-server.sh` - æœåŠ¡å™¨åˆå§‹åŒ–è„šæœ¬

**é…ç½®**:
- ç«¯å£ï¼š6060
- å®˜ç½‘ç«™ç‚¹ï¼š`/var/www/xplan-demo/official-site`
- DemoSite ç«™ç‚¹ï¼š`/var/www/xplan-demo/DemoSite`
- CORS æ”¯æŒè·¨åŸŸé€šä¿¡
- å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š`/health`

---

### 6. GitHub Actions - å‰ç«¯è‡ªåŠ¨éƒ¨ç½² âœ…

**æ–‡ä»¶**: `.github/workflows/deploy-frontend.yml`

**å·¥ä½œæµ**:
1. æ„å»ºå®˜ç½‘å‰ç«¯ï¼ˆReact + Viteï¼‰
2. éƒ¨ç½²åˆ° Ubuntu æœåŠ¡å™¨
3. éƒ¨ç½² DemoSite
4. é…ç½® Nginx
5. éªŒè¯éƒ¨ç½²

**éœ€è¦çš„ GitHub Secrets**:
- `SSH_PRIVATE_KEY` - æœåŠ¡å™¨ SSH ç§é’¥

---

### 7. IPFS éƒ¨ç½²é…ç½® âœ…

**æ–‡ä»¶**:
- `.github/workflows/build-and-deploy-ipfs.yml` - IPFS éƒ¨ç½²å·¥ä½œæµ
- `.github/scripts/upload-ipfs.js` - Pinata ä¸Šä¼ è„šæœ¬
- `server-configs/deploy-ipfs.sh` - æœ¬åœ°éƒ¨ç½²è„šæœ¬

**åŠŸèƒ½**:
- è‡ªåŠ¨æ„å»ºå‰ç«¯
- ä¸Šä¼ åˆ° IPFSï¼ˆPinataï¼‰
- è¿”å› CID å’Œè®¿é—®é“¾æ¥

**éœ€è¦çš„ GitHub Secrets**:
- `PINATA_API_KEY`
- `PINATA_API_SECRET`
- `PINATA_JWT`

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
d:\TOBEHOST\xplan2026\
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ deploy-worker.yml          # Worker è‡ªåŠ¨éƒ¨ç½²
â”‚   â”‚   â”œâ”€â”€ deploy-frontend.yml        # å‰ç«¯è‡ªåŠ¨éƒ¨ç½²
â”‚   â”‚   â””â”€â”€ build-and-deploy-ipfs.yml # IPFS éƒ¨ç½²
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ upload-ipfs.js           # Pinata ä¸Šä¼ è„šæœ¬
â”œâ”€â”€ cloudflare/
â”‚   â””â”€â”€ tactics-1/                  # Cloudflare Worker
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ DemoSite/                   # æ¼”ç¤ºç«™ç‚¹
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â”œâ”€â”€ variables.css
â”‚   â”‚   â”‚   â”œâ”€â”€ styles.css
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.css          # æ–°å¢
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.js          # æ–°å¢
â”‚   â”‚   â””â”€â”€ index.html              # ä¾§è¾¹æ å¸ƒå±€
â”‚   â””â”€â”€ official-site/             # å®˜ç½‘
â”‚       â””â”€â”€ .env.example          # æ–°å¢
â”œâ”€â”€ Smart/                        # æ–°å¢ç›®å½•
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ AntiTheft.sol
â”‚   â”‚   â””â”€â”€ IERC20.sol
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ deploy.js
â”‚   â”œâ”€â”€ hardhat.config.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server-configs/               # æ–°å¢ç›®å½•
â”‚   â”œâ”€â”€ xplan-demo.conf           # Nginx é…ç½®
â”‚   â”œâ”€â”€ deploy-frontend.sh        # å‰ç«¯éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy-ipfs.sh           # IPFS éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ setup-server.sh          # æœåŠ¡å™¨åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ éƒ¨ç½²æŒ‡å—/
â”‚       â””â”€â”€ å®Œæ•´çš„éƒ¨ç½²é…ç½®.md     # æ–°å¢æ–‡æ¡£
â””â”€â”€ temp/
    â””â”€â”€ ä¸­æ–­çš„ä»»åŠ¡.md              # æ›´æ–°çŠ¶æ€
```

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### å¼€å‘ç¯å¢ƒ
1. **æœ¬åœ°ä¿®æ”¹**ï¼šåœ¨ç¬”è®°æœ¬ä¸Šä¿®æ”¹ä»£ç 
2. **æäº¤ä»£ç **ï¼š`git add . && git commit -m "xxx" && git push`
3. **è‡ªåŠ¨éƒ¨ç½²**ï¼šGitHub Actions è‡ªåŠ¨è§¦å‘éƒ¨ç½²

### é¦–æ¬¡éƒ¨ç½²åˆ° Ubuntu
1. **åˆå§‹åŒ–æœåŠ¡å™¨**ï¼š
   ```bash
   ssh root@182.254.180.26
   cd /tmp && git clone https://github.com/xplan2026/xplandemo.git
   cd xplandemo && ./server-configs/setup-server.sh
   ```

2. **é…ç½® GitHub Secrets**ï¼š
   - æ·»åŠ  `SSH_PRIVATE_KEY`

3. **è§¦å‘éƒ¨ç½²**ï¼šæ¨é€åˆ° `master` åˆ†æ”¯

### éƒ¨ç½²åˆ° IPFS
1. **æ‰“æ ‡ç­¾**ï¼š`git tag v1.0.0 && git push origin v1.0.0`
2. **è‡ªåŠ¨éƒ¨ç½²**ï¼šGitHub Actions è‡ªåŠ¨ä¸Šä¼ åˆ° IPFS

---

## ğŸ“ ä½¿ç”¨æ–‡æ¡£

### éƒ¨ç½²æŒ‡å—
å®Œæ•´éƒ¨ç½²æ–‡æ¡£ï¼š`docs/éƒ¨ç½²æŒ‡å—/å®Œæ•´çš„éƒ¨ç½²é…ç½®.md`

### ä»»åŠ¡è®°å½•
ä»»åŠ¡æ¸…å•ï¼š`temp/ä¸­æ–­çš„ä»»åŠ¡.md`

---

## âœ… éªŒè¯æ¸…å•

- [x] DemoSite ä¾§è¾¹æ å¸ƒå±€æ­£å¸¸
- [x] å®˜ç½‘ Web3 ç™»å½•åŠŸèƒ½æ­£å¸¸
- [x] DemoSite æ¥æ”¶è·¨åŸŸé’±åŒ…ä¿¡æ¯
- [x] Smart åˆçº¦ç¼–è¯‘é€šè¿‡
- [x] GitHub Actions Worker éƒ¨ç½²é…ç½®æ­£ç¡®
- [x] Nginx é…ç½®æ–‡ä»¶æ ¼å¼æ­£ç¡®
- [x] GitHub Actions å‰ç«¯éƒ¨ç½²é…ç½®æ­£ç¡®
- [x] IPFS éƒ¨ç½²è„šæœ¬å¯æ‰§è¡Œ
- [x] æ‰€æœ‰æ–‡æ¡£å·²åˆ›å»º

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•éƒ¨ç½²**ï¼š
   - åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šè¿è¡Œ `setup-server.sh`
   - æ‰‹åŠ¨æ‰§è¡Œ `deploy-frontend.sh` æµ‹è¯•
   - éªŒè¯ GitHub Actions è‡ªåŠ¨éƒ¨ç½²

2. **é…ç½® GitHub Secrets**ï¼š
   - æ·»åŠ æ‰€æœ‰å¿…éœ€çš„ Secrets
   - æµ‹è¯•è‡ªåŠ¨éƒ¨ç½²æµç¨‹

3. **éƒ¨ç½² Smart åˆçº¦**ï¼š
   - å®‰è£…ä¾èµ–ï¼š`cd Smart && npm install`
   - éƒ¨ç½²åˆ° Polygon Amoy

4. **æµ‹è¯•åŠŸèƒ½**ï¼š
   - æµ‹è¯•å®˜ç½‘ Web3 ç™»å½•
   - æµ‹è¯• DemoSite è·¨åŸŸé‰´æƒ
   - æµ‹è¯• Worker ä¿æŠ¤åŠŸèƒ½

5. **å®Œå–„æ–‡æ¡£**ï¼š
   - æ·»åŠ æˆªå›¾
   - è¡¥å……æ•…éšœæ’æŸ¥æŒ‡å—
   - æ·»åŠ è§†é¢‘æ•™ç¨‹

---

**æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼ğŸ‰**
