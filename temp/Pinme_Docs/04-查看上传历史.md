## 查看上传历史
list 与 ls 命令可以查看上传历史、追踪部署记录并管理已存储的内容。PinMe 会维护一份包含所有上传活动的历史记录。

### 命令语法:
```bash
pinme list [options]
pinme ls [options]
```
两个命令完全等价：ls 只是 list 的短别名。

### 命令选项
基础用法
```bash
# 显示最近 10 条上传（默认）
pinme list

# 短命令
pinme ls

# 限制结果数量
# 显示最近 5 条
pinme list -l 5

# 显示最近 20 条
pinme ls --limit 20

# 显示更多（例如 1000 条）
pinme list -l 1000

# 清空历史
# 清空本机本地历史
pinme list -c

# 带确认提示的清空
pinme ls --clear
```
### 历史输出格式
- 标准显示
```bash
[LIST] Upload History (showing last 10)

┌─────────────────────────────────────────────────────────────┬─────────────────┬──────────────────┬──────────────┬─────────────────────────┐
│ File/Directory                                            │ IPFS Hash       │ Upload Time      │ Size         │ Domain                  │
├─────────────────────────────────────────────────────────────┼─────────────────┼──────────────────┼──────────────┼─────────────────────────┤
│ ./my-portfolio/index.html                                  │ bafybei...abc   │ 2024-12-12 10:30 │ 15.2 KB      │ my-portfolio            │
│ ./docs/                                                    │ bafybei...def   │ 2024-12-12 09:15 │ 2.1 MB       │ docs-project            │
│ ./assets/images/                                           │ bafybei...ghi   │ 2024-12-11 16:45 │ 845 KB       │ -                       │
│ ./v1.0.0/                                                  │ bafybei...jkl   │ 2024-12-11 14:20 │ 15.8 MB      │ app-v1.0                │
│ ./report.pdf                                               │ bafybei...mno   │ 2024-12-10 11:30 │ 2.5 MB       │ -                       │
└─────────────────────────────────────────────────────────────┴─────────────────┴──────────────────┴──────────────┴─────────────────────────┘
```
如何理解历史记录

### 字段说明
- Path：原始文件/目录路径
- IPFS Hash：内容唯一标识（CID）
- Size：本次上传的总大小
- Time：上传完成时间
- Domain：绑定的域名（若有）
- Status：当前上传记录状态

### 历史管理
#### 本地历史 vs 云端历史

**本地历史**
- 仅包含本设备的上传
- 上传后立即可见
- 可通过 pinme list -c 清空

**云端历史（需 AppKey）**
- 跨设备同步
- 包含所有设置过 AppKey 的设备上传

**安全备份**
- 即使清空本地也可从云端恢复
- 历史同步
设置 AppKey 后：
```bash
# 设置 AppKey
pinme set-appkey your-app-key

# 本地匿名上传会被合并
# 云端历史会被下载
# 后续上传会在设备间同步
```
**过滤与搜索**
- 按日期
```bash
# 今天的上传（从列表里手动过滤）
pinme list -l 50 | grep "2024-12-12"
```
- 按域名
```bash
# 找出所有带域名的上传
pinme list -l 100 | grep -v " - "
```
- 按大小
```bash
# 查找大文件（>1MB）
pinme list -l 100 | grep "MB"
```
- 按文件类型
```bash
pinme list -l 100 | grep "\.html"
pinme list -l 100 | grep "\.pdf"
```
## 故障排查
### 常见问题

- “没有历史记录”
```bash
# 检查历史文件是否存在
ls -la ~/.pinme/history.json

# 先上传一次
pinme upload ./test.txt

# 或设置 AppKey 从云端同步
pinme set-appkey your-key
```
- “历史不同步”
```bash
# 确认 AppKey 已设置
pinme set-appkey

# 检查网络
ping pinme.eth.limo

# 尝试手动重同步
pinme list -c  # 清空本地
pinme set-appkey  # 从云端重新同步
```
- “历史文件损坏”
```bash
# 备份损坏文件
mv ~/.pinme/history.json ~/.pinme/history.json.broken

# 重新开始（云端历史会同步回来）
pinme set-appkey
```
## 隐私注意事项
### 本地历史
- 以纯文本形式存储在本机
- 包含文件路径与 IPFS 哈希
- 默认不加密

### 云端历史
- 加密存储
- 仅可通过 AppKey 访问
- 可在账号设置中删除
- 敏感文件
```bash
# 对敏感内容建议匿名上传（不要先设置 AppKey）
pinme upload
```