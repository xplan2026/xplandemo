# X-plan Demo

> åŒºå—é“¾èµ„äº§ä¿æŠ¤æ¨¡æ‹Ÿæ¼”ç¤ºç³»ç»Ÿ - åŸºäº Cloudflare Workers çš„è‡ªåŠ¨åŒ–èµ„äº§è½¬ç§»ä¿æŠ¤æœºåˆ¶

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

X-plan Demo æ˜¯ä¸€ä¸ªåŒºå—é“¾èµ„äº§ä¿æŠ¤æ¨¡æ‹Ÿæ¼”ç¤ºç³»ç»Ÿï¼Œç”¨äºå±•ç¤ºåœ¨é’±åŒ…ç§é’¥è¢«ç›—åœºæ™¯ä¸‹ï¼Œå¦‚ä½•é€šè¿‡è‡ªåŠ¨åŒ– Worker æœåŠ¡å®ç°èµ„äº§çš„æŠ¢å…ˆè½¬ç§»ä¿æŠ¤åŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **ç§é’¥è¢«ç›—æ¨¡æ‹Ÿ**ï¼šå±•ç¤ºè¢«ä¿æŠ¤é’±åŒ…çš„å…¬é’¥å’Œç§é’¥ï¼Œä¾›æµ‹è¯•è€…æ¨¡æ‹Ÿæ”»å‡»
- âœ… **è‡ªåŠ¨åŒ–ä¿æŠ¤**ï¼šWorker è‡ªåŠ¨ç›‘æ§é’±åŒ…ä½™é¢ï¼Œåœ¨æ£€æµ‹åˆ°å¼‚å¸¸æ—¶æŠ¢å…ˆè½¬ç§»èµ„äº§
- âœ… **åº”æ€¥çŠ¶æ€æ§åˆ¶**ï¼šæ”¯æŒå¼€å¯/å…³é—­åº”æ€¥æ¨¡å¼ï¼Œè°ƒèŠ‚æ‰«æé¢‘ç‡
- âœ… **å®æ—¶ç›‘æ§**ï¼šå‰ç«¯å®æ—¶æ˜¾ç¤ºé’±åŒ…ä½™é¢ã€Worker çŠ¶æ€å’Œæ“ä½œæ—¥å¿—

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æœåŠ¡

**Cloudflare Workersï¼ˆtactics-1ï¼‰**

- **ç»Ÿä¸€è°ƒåº¦å™¨**ï¼ˆ`tactics-1`ï¼‰ï¼šé›†æˆå¤šç§æ‰©å±•åŠŸèƒ½çš„ä¸» Worker
  - **åº”æ€¥çŠ¶æ€æ‰©å±•**ï¼ˆ`EmergencyWorkerExtension`ï¼‰ï¼šé«˜é¢‘æ‰«æï¼Œæ£€æµ‹åˆ°èµ„äº§åè§¦å‘è½¬è´¦
  - **è½¬è´¦æ‰©å±•**ï¼ˆ`TransferWorkerExtension`ï¼‰ï¼šæ‰§è¡Œä»£å¸è½¬è´¦æ“ä½œ
  - **Aideæ‰©å±•**ï¼ˆ`AideWorkerExtension`ï¼‰ï¼šç›‘æ§äº¤æ˜“çŠ¶æ€ï¼Œå¤„ç†é‡è¯•å’Œ Gas è¡¥å……
  - **æ•°æ®åº“æ‰©å±•**ï¼ˆ`DatabaseExtension`ï¼‰ï¼šä¸ Supabase æ•°æ®åº“äº¤äº’
  - **RPC è¿æ¥æ± **ï¼ˆ`RpcPoolOptimizedExtension`ï¼‰ï¼šä¼˜åŒ–çš„ RPC è°ƒç”¨ç®¡ç†
  - **Gas è¡¥å……**ï¼ˆ`GasExtension`ï¼‰ï¼šä¸ºé’±åŒ…è¡¥å…… Gas ä»£å¸

### å‰ç«¯

- **Demo ç«™ç‚¹**ï¼ˆ`frontend/DemoSite`ï¼‰ï¼šåŠŸèƒ½æ¼”ç¤ºç½‘ç«™ï¼Œå®ç°å®Œæ•´çš„åç›—å¸ç­–ç•¥æ¼”ç¤º

### æ™ºèƒ½åˆçº¦

- **AntiTheft åˆçº¦**ï¼ˆ`Smart/contracts/AntiTheft.sol`ï¼‰ï¼šé˜²ç›—å¸ç­–ç•¥çš„æ ¸å¿ƒæ™ºèƒ½åˆçº¦
- **éƒ¨ç½²å·¥å…·**ï¼šHardhat å¼€å‘ç¯å¢ƒ
- **æµ‹è¯•ç½‘ç»œ**ï¼šPolygon Amoy Testnet (Chain ID: 80002)

### æ•°æ®åº“

- **Supabase**ï¼šç”¨äºå­˜å‚¨é’±åŒ…é…ç½®ã€äº¤æ˜“è®°å½•ç­‰æ•°æ®

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

æœ¬é¡¹ç›®éœ€è¦ä»¥ä¸‹å¼€å‘ç¯å¢ƒï¼š

- Node.js >= 22 LTSï¼ˆæ¨è 22.xï¼‰
- npm æˆ– yarn
- Wrangler CLI (Cloudflare Workers å¼€å‘å·¥å…·)
- Hardhatï¼ˆæ™ºèƒ½åˆçº¦å¼€å‘ï¼‰

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®ä¿¡æ¯ã€‚

### å®‰è£…ä¾èµ–

```bash
# å®‰è£… Cloudflare Workers ä¾èµ–
cd cloudflare
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend/DemoSite
npm install

# å®‰è£…æ™ºèƒ½åˆçº¦ä¾èµ–
cd ../../Smart
npm install
```

### é…ç½® Cloudflare Secrets

```bash
cd cloudflare/tactics-1

# é…ç½® Supabase è¿æ¥
wrangler secret put SUPABASE_URL
wrangler secret put SUPABASE_KEY

# é…ç½®é’±åŒ…ç§é’¥ï¼ˆé‡è¦ï¼šç§é’¥ä½¿ç”¨åŠ å¯†å­˜å‚¨ï¼‰
wrangler secret put WALLET_PRIVATE_KEY_<address>
wrangler secret put GAS_FUNDING_WALLET_PRIVATE_KEY
```

### éƒ¨ç½² Worker

```bash
cd cloudflare/tactics-1
npx wrangler deploy
```

### éƒ¨ç½²æ™ºèƒ½åˆçº¦ï¼ˆå¯é€‰ï¼‰

```bash
cd Smart
npx hardhat run scripts/deploy.js --network amoy
```

### å¯åŠ¨å‰ç«¯

```bash
cd frontend/DemoSite
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5174

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
xplandemo/
â”œâ”€â”€ cloudflare/               # Cloudflare Workers åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ tactics-1/           # ä¸» Worker é¡¹ç›®
â”‚   â”‚   â”œâ”€â”€ src/            # Worker æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ wrangler.toml   # Worker é…ç½®
â”‚   â”‚   â””â”€â”€ package.json    # ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ extensions/         # æ‰©å±•å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ aide-worker/         # Aide æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ database/            # æ•°æ®åº“æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ emergency-worker/    # åº”æ€¥çŠ¶æ€æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ gas/                 # Gas è¡¥å……
â”‚   â”‚   â”œâ”€â”€ rpc-pool-optimized/  # RPC è¿æ¥æ± 
â”‚   â”‚   â”œâ”€â”€ scanner/             # æ‰«æå™¨
â”‚   â”‚   â”œâ”€â”€ transfer/           # è½¬è´¦æ‰©å±•
â”‚   â”‚   â””â”€â”€ transfer-worker/     # è½¬è´¦ Worker
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README-bot-architecture.md
â”‚
â”œâ”€â”€ frontend/                # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ DemoSite/            # åŠŸèƒ½æ¼”ç¤ºç«™ç‚¹
â”‚   â”‚   â”œâ”€â”€ index.html       # ä¸»é¡µé¢
â”‚   â”‚   â”œâ”€â”€ css/             # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ js/              # JavaScript æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ README.md        # å‰ç«¯è¯´æ˜
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ Smart/                   # æ™ºèƒ½åˆçº¦ï¼ˆHardhatï¼‰
â”‚   â”œâ”€â”€ contracts/
â”‚   â”‚   â”œâ”€â”€ AntiTheft.sol    # é˜²ç›—å¸åˆçº¦
â”‚   â”‚   â””â”€â”€ IERC20.sol       # ERC20 æ¥å£
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ deploy.js        # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ hardhat.config.js    # Hardhat é…ç½®
â”‚   â””â”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ ERC20/                   # ERC20 ä»£å¸åˆçº¦ç›¸å…³
â”œâ”€â”€ supabase/                # Supabase æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ *.sql               # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ server-configs/          # æœåŠ¡å™¨é…ç½®è„šæœ¬
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .ide/                    # IDE é…ç½®
â”‚   â””â”€â”€ Dockerfile          # å¼€å‘ç¯å¢ƒ Docker é•œåƒ
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
â””â”€â”€ README.md
```

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- [é¡¹ç›®èƒŒæ™¯ä¸åŠŸèƒ½è¯´æ˜](docs/é¡¹ç›®èƒŒæ™¯.md)
- [å‰ç«¯åŠŸèƒ½è¯´æ˜](docs/å‰ç«¯åŠŸèƒ½è¯´æ˜.md)
- [ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜](docs/ç¯å¢ƒå˜é‡è¯´æ˜.md)
- [API é…ç½®](docs/APIé…ç½®.md)
- [é’±åŒ…åœ°å€é…ç½®](docs/wallet-addresses.md)
- [Worker æ¶æ„è¯´æ˜](cloudflare/README-bot-architecture.md)
- [Worker é€‚é…ä¿®æ”¹è¯´æ˜](cloudflare/WORKER_é€‚é…ä¿®æ”¹è¯´æ˜.md)
- [å¾…åŠäº‹é¡¹æ¸…å•](docs/TODO.md)
- [å‰ç«¯éƒ¨ç½²è¯´æ˜](frontend/DemoSite/å¯åŠ¨è¯´æ˜.md)

---

## ğŸ”§ å¼€å‘ç¯å¢ƒ

### ä½¿ç”¨ Docker æ„å»ºï¼ˆæ¨èï¼‰

```bash
# æ„å»ºå¼€å‘ç¯å¢ƒé•œåƒ
docker build -t xplandemo-dev .ide/

# è¿è¡Œå®¹å™¨
docker run -it --rm \
  -v $(pwd):/workspace \
  -p 3000:3000 \
  -p 5174:5174 \
  xplandemo-dev
```

Docker é•œåƒåŒ…å«ï¼š
- Node.js 22 LTS
- Wrangler CLI
- Hardhat
- Python 3.11 + web3 åº“
- å‰ç«¯å¼€å‘å·¥å…·

---

## ğŸ” å®‰å…¨é¡»çŸ¥

âš ï¸ **é‡è¦æç¤º**ï¼š

1. **ä»…ä¾›æµ‹è¯•**ï¼šæœ¬é¡¹ç›®æ¼”ç¤ºåœ¨æµ‹è¯•ç½‘è¿›è¡Œï¼Œåˆ‡å‹¿åœ¨ä¸»ç½‘ä½¿ç”¨çœŸå®èµ„äº§
2. **ç§é’¥å®‰å…¨**ï¼š
   - ç§é’¥åº”å­˜å‚¨åœ¨ Cloudflare Secrets ä¸­ï¼Œè€Œéç¯å¢ƒå˜é‡æ–‡ä»¶
   - å‰ç«¯ç§é’¥å¯¼å…¥åŠŸèƒ½ä»…ç”¨äºæ¼”ç¤ºï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸¥ç¦ä½¿ç”¨
3. **ç¯å¢ƒå˜é‡**ï¼š`.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œåˆ‡å‹¿æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
4. **ç½‘ç»œå®‰å…¨**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶åº”å¯ç”¨æ‰€æœ‰å®‰å…¨é…ç½®ï¼ŒåŒ…æ‹¬ CORSã€é€Ÿç‡é™åˆ¶ç­‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š
1. ä»£ç é€šè¿‡ lint æ£€æŸ¥
2. æ·»åŠ å¿…è¦çš„æµ‹è¯•
3. æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

æœ€åæ›´æ–°ï¼š2026-02-11

