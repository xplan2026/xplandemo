# 第三方资源使用记录

> 本文档记录项目使用的各类第三方免费资源的使用历史和配置信息，便于资源管理和迁移。

---

## Cloudflare

### 域名托管

| 域名 | 用途 | 状态 | 注册时间 |
|------|------|------|----------|
| bsc-guard.weare.run | v1 前端站点（已废弃） | ⚪ 已停用 | - |
| - | v2 前端站点（规划中） | 📋 计划中 | - |

#### 域名配置记录

**v1 前端站点配置**（已废弃）：
- 部署方式：静态托管
- SSL 证书：自动续期（Cloudflare 免费 SSL）
- DNS 记录：已清理
- 停用原因：v1 版本已废弃

### Workers

| Worker 名称 | 用途 | 对应版本 | 状态 |
|-------------|------|----------|------|
| - | Worker-1 Interception（抢先转移） | v1 | ✅ 已部署 |
| - | Worker-2 Scheduler（定时任务） | v2 | 🚧 开发中 |
| - | Worker-3 Surveillance（监控告警） | v2 | 📋 计划中 |

#### Worker 部署详情

**Worker-1 Interception**
- 分支：`BSC-Guard-system-v1.0`
- 部署时间：2025-01-XX
- 环境变量：
  - `BSC_RPC`: `https://bsc-rpc.publicnode.com`
  - `WATCHED_WALLETS`: [客户钱包地址列表]
  - `SAFE_WALLET`: [安全钱包地址]
  - `TOKEN_ADDRESSES`: [监控代币地址列表]
  - `SUPABASE_URL`: [Supabase 项目 URL]
  - `SUPABASE_KEY`: [Supabase 公开密钥]
  - `JWT_SECRET`: [JWT 签名密钥]
  - `WALLET_PRIVATE_KEY_*`: [各监控钱包私钥]
- 定时触发：`* * * * *`（每分钟）
- 当前状态：⚠️ 已停用（v1 废弃）

### KV

| KV 命名空间 | 用途 | 对应版本 | 状态 |
|------------|------|----------|------|
| - | 任务状态存储 | v2 | 📋 计划中 |

### 静态存储 (R2)

| Bucket 名称 | 用途 | 对应版本 | 状态 |
|-------------|------|----------|------|
| - | 前端静态资源托管 | v2+ | 📋 计划中 |

---

## Supabase

### 项目概览

| 项目名称 | 用途 | 对应版本 | 状态 |
|----------|------|----------|------|
| - | 数据库服务 | v1 | ⚪ 已停用 |
| - | 数据库服务 | v2 | 🚧 开发中 |

### v1 使用记录（已停用）

- **项目 URL**: [v1 Supabase URL]
- **停用时间**: 2025-01-XX
- **停用原因**: v1 版本已废弃，v2 重新设计
- **数据表结构**:
  - `wallets_monitor` - 监控钱包表
  - `transactions` - 交易记录表
  - `whitelist` - 白名单表
- **数据量**:
  - `wallets_monitor`: N 条
  - `transactions`: N 条
  - `whitelist`: N 条
- **清理状态**: ✅ 已清理

### v2 使用记录（开发中）

- **项目 URL**: [v2 Supabase URL]（待创建）
- **创建时间**: 2025-01-XX（待创建）
- **数据库结构**:
  - Extension: Database Extension（共用扩展）
  - `wallets` - 钱包表
  - `transactions` - 交易记录表
  - `tasks` - 任务表（Worker-2）
  - `alerts` - 告警表（Worker-3）
  - `whitelist` - 白名单表
- **使用限制**:
  - 免费版每表最多 1000 条记录
  - 已配置自动清理触发器（保留 900 条）

---

## 腾讯云服务器

### 前端站点配置记录（v1 已废弃）

| 配置项 | 配置内容 | 状态 |
|--------|----------|------|
| 服务器 | [服务器 IP] | ⚪ 已停用 |
| 部署路径 | /var/www/bsc-guard | 已清理 |
| Web 服务器 | Nginx | 已停用 |
| SSL 证书 | Let's Encrypt | 已过期 |
| 域名 | bsc-guard.weare.run | 已停用 |

#### v1 Nginx 配置（已废弃）

```nginx
server {
    listen 80;
    server_name bsc-guard.weare.run;

    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl;
    server_name bsc-guard.weare.run;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    root /var/www/bsc-guard;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
```

**停用时间**: 2025-01-XX
**停用原因**: v1 版本已废弃，v2 前端将使用 Cloudflare Pages 或其他方案

---

## Pages 静态前端部署记录

> Pages 用于静态前端部署，提供全球 CDN 加速

| 项目名称 | 用途 | 对应版本 | 状态 |
|----------|------|----------|------|
| - | v1 前端站点 | v1 | ⚪ 已停用 |
| - | v2 前端站点 | v2 | 📋 计划中 |

### v1 部署记录（已停用）

- **项目 URL**: [v1 Pages URL]
- **部署时间**: 2025-01-XX
- **部署方式**: Git 集成（从仓库部署）
- **构建命令**: -（纯静态，无需构建）
- **构建输出目录**: dist/
- **停用时间**: 2025-01-XX
- **停用原因**: v1 版本已废弃

### v2 部署记录（计划中）

- **项目 URL**: 待定
- **部署时间**: 待定
- **部署方式**: 待定
- **构建命令**: 待定
- **构建输出目录**: 待定

---

## 智能合约

> v3 版本创建 Demo 需要使用到智能合约

### 规划中的合约

| 合约名称 | 用途 | 链 | 对应版本 | 状态 |
|----------|------|----|----------|------|
| TestToken | 测试代币 | BSC Testnet | v3 | 📋 计划中 |
| - | 其他合约 | - | v3 | 📋 计划中 |

### v3 合约部署计划（BSC Testnet）

- **网络**: BSC 测试网（https://testnet.bscscan.com）
- **部署工具**: Hardhat / Remix
- **部署地址**: 待定
- **合约验证**: 待定

#### TestToken 合约说明

- **用途**: 用于 v3 版本 Demo 演示
- **代币名称**: X-Plan Test Token
- **代币符号**: XPT
- **初始供应量**: 1,000,000
- **Decimals**: 18

---

## 资源使用总结

### 当前活跃资源

| 资源 | 使用量 | 费用 | 状态 |
|------|--------|------|------|
| Cloudflare Workers | 0/100 | 免费 | 待激活 |
| Cloudflare KV | 0/1 GB | 免费 | 未使用 |
| Supabase | 0/500 MB | 免费 | 待创建 |
| 腾讯云服务器 | 0 | - | 已停用 |
| Pages | 0/1 项目 | 免费 | 待激活 |
| 智能合约 | 0 | Gas 费 | 待部署 |

### 历史废弃资源

| 资源 | 废弃时间 | 清理状态 |
|------|----------|----------|
| v1 Supabase 项目 | 2025-01-XX | ✅ 已清理 |
| v1 腾讯云服务器 | 2025-01-XX | ✅ 已清理 |
| v1 Pages 项目 | 2025-01-XX | ✅ 已清理 |
| v1 Cloudflare Worker | 2025-01-XX | ✅ 已停用 |

---

## 资源迁移指南

### 从 v1 迁移到 v2

1. **Cloudflare Workers**:
   - 停用 v1 Worker-1
   - 部署 v2 Worker-1/2/3
   - 迁移环境变量

2. **Supabase**:
   - 备份 v1 数据库（如有需要）
   - 创建 v2 新项目
   - 执行 v2 数据库初始化脚本
   - 迁移白名单数据

3. **前端**:
   - 停用 v1 前端（腾讯云/Pages）
   - 部署 v2 前端到 Pages 或其他方案
   - 更新 API 端点

---

## 注意事项

1. **免费资源限制**:
   - Cloudflare Workers: 每天 100,000 次请求
   - Supabase: 每表 1000 条记录
   - Pages: 500 MB 带宽/月

2. **数据备份**:
   - Supabase 定期备份
   - Cloudflare KV 手动备份

3. **监控告警**:
   - 设置资源使用量监控
   - 及时处理资源不足情况

---

**最后更新**: 2026-01-18
