# X-plan 项目愿景与规划

## 项目背景

X-plan（原名 BSC Guard System）是一个由真实案例催生的区块链资产安全防护项目。

### 真实案例

**几个名词定义**：

- **用户**：在本文中专指私钥被，提出反盗币需求的人
- **盗币者**：盗取用户私钥，将资产转移到其他钱包的黑客
- **被保护钱包**：用户私钥被盗的3个钱包，不定期接收合约发放的代币
- **盗币者钱包**：盗币者转移资产的钱包
- **代币**：本项目中的代币专指：`wkeyDAO`
- **Gas费**：代币部署在BSC，所以本项目中的`Gas`费指的是`BNB`+`USDT`

**事件概述**：
- 用户参与了`wkeyDAO`项目，按照智能合约的约定，用户有3个钱包会不定期从合约中收获代币。
- **资产一**：在收获代币之前，需经过一个称为“涡轮”的过程，
    - 需手动申涡轮，要使用`USDT`做为`gas`费
    - 涡轮时间12小时，涡轮结束后合约会自动将涡轮处理的代币数额转入用户的3个钱包中
- **资产二**：合约会每天释放用户被冻结的本金，小额但持续
- **私钥被盗**：用户的3个钱包私钥均被盗，导致资产被持续转移。
    - 盗币者获取私钥后，掌握了3个钱包的所有权限
    - 用户首先将3个钱包中所有资产余额转移，包括`USDT`和`wkeyDAO`清零，`BNB`不足支付`gas`费；
    - 盗币者会主动转入`USDT`，手动启动涡轮，在涡轮结束临近时间转入少量`BNB`补充`gas`费，然后盗走涡轮出来的`wkeyDAO`代币；
    - 盗币者会不定期将钱包中的解冻本金资产一次转出，造成严重损失。
- **由于这三个钱包与合约的绑定关系，用户无法废弃这3个已经私钥暴露的钱包**。

**痛点分析**：
1. **持续损失** - 由于无法废弃钱包，盗币者会持续转出资产，造成持续损失
2. **被近抢跑** - 用户只能与盗币者进行抢先转移的竞赛，浪费大量时间与精力，防不胜防
3. **损失巨大** - 已累积超过10万RMB的损失，但在当前环境中没有其它解决途径
4. **后续时间长** - 用户执行wkeyDAO合约的总时长为540天，还余400多天，面临更大的资产损失风险

**解决方案**：
1. `X-plan` 提供一个**自动监控**和**多worker协作**的资产保护策略，在检测到3个被保护钱包有资产变动时，**抢先一步将资产转移到安全钱包**，与盗币者进行"时间竞赛"，最大程度减少损失。
2. `X-plan` 是基于第三方网络平台提供的免费资源部署自动化工作流，由于免费资源的限制，当前最大化只能做到20秒间隔的扫描任务，理论上能做到95%抢跑赢率（手动与自动化比较）。
3. 在20秒一次扫描频率的基础上，`X-plan`：
- 在第一个版本中（应急版本：仅实现每分钟常规扫描一次） 实现了应急状态管理，可以触发5秒一次扫描+自动转帐
- 在第二个版本中，实现了20秒常规扫描+应急状态+转帐后管理+自动补充gas费功能

---

## 项目愿景

### 使命
为区块链资产防护做出贡献，提供有效的数字资产保护服务。

### 愿景
成为私钥被盗场景的有效解决方案，推动 Web3 安全生态的健康发展。

### 核心价值

1. **时间竞赛** - 与黑客抢时间，在资产被转出前完成抢跑（完整闭环的自动化工作流，7x24守护）
2. **普惠安全** - 免费开源版本，让所有人都能使用，并提供多种策略
3. **企业级可靠** - 商业版本提供数据中台等企业级功能，自有资源部署增加系统健壮程度
4. **社区共建** - 开放源码，吸引全球开发者共同完善

---

## 版本规划

### 📦 第一版：应急处理方案（已完成）

**分支**：`v1.0.0`、`v1.1.0`

**定位**：快速响应，解决燃眉之急

**核心功能**：
- ✅ Cloudflare Worker 自动监控
- ✅ 检测到资产转入时自动转移
- ✅ 交易记录保存（Supabase）

**部署状态**：
- ✅ Worker 已部署并运行（已验证）
- ⏳ 无需前端

**技术栈**：
- Cloudflare Workers
- Supabase
- 原生 JavaScript

---

### 🚀 第二版：升级方案（进行中）

**分支**：`v2.x.x`

**定位**：架构升级，模块化设计，使用扩展进行功能分层与协同

**核心目标**：
1. **架构重构** - 统一的扩展架构，功能分层，代码复用性提升
2. **模块化设计** - Worker 拆分，职责清晰
3. **数据库扩展** - 统一的数据管理接口
4. **文档完善** - 完善的开发和使用文档

**目录结构**：
```
workspace/
├── cloudflare/
│   ├── worker-turns-1/   # 轮询扫描器 Worker-1（与其他 Worker 轮流执行）
│   ├── worker-turns-2/   # 轮询扫描器 Worker-2（与其他 Worker 轮流执行）
│   ├── worker-turns-3/   # 轮询扫描器 Worker-3（与其他 Worker 轮流执行）
│   ├── extensions/
│   │   ├── database/              # 数据库扩展（Supabase）
│   │   ├── rpc-pool/              # RPC 节点池扩展
│   │   ├── transfer/              # 转账扩展
│   │   ├── scanner/               # 扫描器扩展
│   │   ├── transaction-checker/   # 交易检查扩展
│   │   ├── gas/                   # Gas 资助扩展
│   │   ├── emergency/             # 应急处理扩展
│   │   └── DistributedLock.js     # 分布式锁（用于 Worker 协同）
│   ├── package.json
│   ├── package-lock.json
│   ├── README.md
│   └── deploy-all.sh
├── supabase/               # Supabase 数据库配置
├── docs/                   # 文档
├── .codebuddy/             # 项目配置和记忆
├── package.json
├── package-lock.json
├── README.md
└── License
```

**协同机制**：
- 三个 Worker 每分钟整点同时触发
- 通过分布式锁竞争，只有一个 Worker 执行扫描任务
- 负载均衡，提高系统可靠性

**开发进度**：
- ✅ 目录结构改造完成
- ✅ 三个 Worker 已部署并在 v2.3.0-dev 分支运行
- ✅ 分布式锁协同机制验证通过

**技术栈**：
- Cloudflare Workers（统一架构）
- Supabase（PostgreSQL）
- DatabaseExtension（统一数据访问层）
- KV Cache（缓存层）

---

### 🌐 第三版：官网 + Demo + 开源（计划中）

**定位**：产品展示、推广、开源免费版本（三者互为支撑）

**核心目标**：
1. **官网建设** - 专业品牌形象，产品介绍
2. **Demo 演示** - 完整功能演示，吸引潜在用户
3. **开源发布** - 在 GitHub 上开源，吸引社区贡献
4. **推广普及** - 通过 Demo 和开源扩大用户基础，建立社区

**功能规划**：
- 官网首页（项目介绍、特性展示）
- 在线 Demo（Polygon-Amoy 测试网）
- 完整文档（部署、配置、使用）
- 社区支持（Discord、GitHub Issues）

**开发进度**：
- ✅ 目录结构改造
- ✅ 主页 Web3 鉴权基础框架（待验证部署）
- ✅ Demo 页前端框架（待验证部署）
- ✅ 演示代币 XPD 已部署在 Polygon-Amoy 测试网
- ⏳ 演示所需钱包地址及私钥配置（待完成）
- ✅ 数据库 Extension 设计开发
- ⏳ Demo Worker（待开发）

**技术栈**：
- TDesign（UI 组件库）
- Polygon-Amoy Testnet（测试网络）
- React/Vue（前端框架）

---

### 💼 第四版：商业版本（计划中）

**定位**：企业级功能，商业化运营

**核心目标**：
1. **数据中台** - 统一的数据管理和分析平台
2. **企业功能** - 多租户、高级告警、报表分析
3. **商业化服务** - 付费订阅、企业支持

**功能规划**：

#### 数据中台功能
- 📊 **BSC-RPC 管理** - 查看/删除/添加 RPC 节点
- 📈 **交易分析** - 单独的交易记录分析页面
- 🔔 **告警管理** - 交易失败记录告警，POP 展示详情，可主动删除
- 👥 **白名单管理** - 增、删、查
- 🛡️ **被保护钱包** - 增、删、查（上限 3 个）
- 🕵️ **盗币者钱包** - 增、删、查（上限 10 个）
- 📝 **合约地址** - 增、删、查（上限 5 个）
- 🗄️ **数据库配置** - Supabase 连接配置（可修改/增加）

#### 可选功能（由 AI 建议）
- 📋 **日志管理** - 查询错误日志、日志分类过滤、日志导出
- 📉 **统计分析** - 交易趋势分析、Worker 性能对比、告警统计
- 💾 **配置备份** - 配置导出、配置导入、配置版本管理
- 🔔 **监控告警** - Webhook 配置、告警规则管理、告警历史记录

#### 多链支持
- Ethereum Mainnet
- Polygon
- Arbitrum
- Optimism
- Base
- ... 更多 EVM 兼容链

**技术栈**：
- 企业级数据中台框架
- 实时数据流处理
- 高可用集群部署
- 多租户架构

---

## 社会价值

### 用户价值
- **资产安全** - 减少盗币损失，保护数字资产
- **简单易用** - 免费开源版本，零门槛使用
- **自主可控** - 私钥本地管理，数据用户掌控

### 社区价值
- **开源贡献** - 推动区块链安全生态发展
- **技术分享** - 提供行业解决方案参考
- **人才培养** - 吸引开发者学习 Web3 安全

### 行业价值
- **安全标准** - 树立区块链资产防护标准
- **最佳实践** - 提供可复制的安全方案
- **技术创新** - 探索主动防御新模式

---

## 开发原则

1. **安全第一** - 系统安全、代码安全、数据安全
2. **用户至上** - 以用户需求为导向，持续优化体验
3. **开放透明** - 代码开源、文档公开、社区共建
4. **务实创新** - 解决实际问题，不追求过度设计
5. **持续迭代** - 小步快跑，快速响应市场需求

---

## 风险与挑战

### 技术风险
- RPC 节点稳定性 - 通过节点池策略缓解
- Gas 费波动 - 智能估算与优化
- 智能合约漏洞 - 代码审计、单元测试
- 分布式锁失效 - 设计超时和重试机制
- Worker 调度延迟 - 优化调度逻辑，补偿机制

### 商业风险
- 竞争压力 - 持续创新，保持技术领先
- 用户信任 - 开源代码，透明运营
- 监管合规 - 关注政策变化，合法合规

### 运营风险
- 社区活跃度 - 持续输出内容，吸引开发者
- 资源投入 - 合理规划开发节奏
- 团队建设 - 招募优秀人才，保持团队活力
- 用户使用门槛高 - 需要部署 Worker，简化配置流程
- Gas 费长期成本 - 持续监控和优化

---

## 成功指标

### 用户指标
- V2 目标：验证抢跑成功率 > 90%
- V3 目标：完成 Demo 演示，建立基础用户群体
- V4 目标：探索商业化模式

### 技术指标
- 系统可用性：99.9%+
- 资产保护成功率：95%+
- 平均响应时间：< 10 秒

### 社区指标
- V3 目标：100+ GitHub Stars
- V4 目标：活跃贡献者 10+
- 每月 Issue/PR：20+

---

## 联系方式

- 项目主页：https://x-plan.top（待开通）
- GitHub：https://github.com/your-org/x-plan（待开源）
- 邮箱：contact@x-plan.top（待开通）
- Discord：https://discord.gg/xplan（待开通）

---

**文档创建日期**: 2026-01-16
**文档版本**: v2.3.0
**最后修改日期**: 2026-01-30
**维护者**: X-plan 开发团队
